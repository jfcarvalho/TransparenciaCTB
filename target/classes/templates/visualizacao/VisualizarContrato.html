<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" >
<link rel="stylesheet" type="text/css" href="/layout/stylesheets/bootstrap-datepicker.standalone.min.css"/>
	<link rel="stylesheet" type="text/css" href="/layout/stylesheets/bootstrap.min.css"/>
 	<link rel="stylesheet" type="text/css" href="/layout/stylesheets/vendors.min.css"/>
	<link rel="stylesheet" type="text/css" href="/layout/stylesheets/algaworks.min.css"/>
	<link rel="stylesheet" type="text/css" href="/layout/stylesheets/application.css"/>
<head>


<title>Cadastro de Lancamentos</title>
</head>

<body>

<div class="aw-layout-page">
<section class="aw-layout-content  js-content is-toggled">
<div layout:include="/cabecalho/CabecalhoLancamento"></div>
<h2 align="center" style="color:red " th:if="${dias}">Faltam <span th:text="${ndias}"></span> dias para o vencimento do contrato</h2>
<h2 align="center" style="color:blue" th:if="${vencido}">Contrato vencido</h2>
<div style="display: block; float:left; margin-top:20px; margin-bottom:20px;">
<table>
 <tr>
  <td>
  Nº contrato:
  </td>
  <td>
  <div th:text="${contrato.numero}" style="width: 300px"></div>
  </td>
 </tr>
 <tr>
  <td>
  Assinado:
  </td>
  <td>
  <div th:text="${#dates.format(contrato.data_assinatura, 'dd/MM/yyyy')}"></div>
  </td>
 </tr>
 <tr>
  <td>
  Nome/Sigla Empresa:
  </td>
  <td>
  <div th:text="${contrato.contratado} ? ${contrato.contratado.nome}: 'Sem nome'" style="width: 300px" ></div> 
  </td>
 </tr>
 <tr>
  <td>
  Razão Social Empresa:
  </td>
  <td>
  <div th:text="${contrato.contratado.razaosocial}" style="width: 300px" ></div> 
  </td>
 </tr>
 <tr>
  <td>
  Gestor:
  </td>
  <td>
  <div th:text="${contrato.gestor.nome}" style="width: 300px"></div>
  </td>
 </tr>
 <tr>
  <td>
  Setor:
  </td>
  <td>
  <div th:text="${contrato.gestor.setor}" style="width: 300px"></div>
  </td>
 </tr>
 <tr>
  <td>
  Objeto:
  </td>
  <td>
 <div th:text="${contrato.objeto}" style="width: 300px"></div>
  </td>
 </tr>
 <tr>
  <td>
  Uso:
  </td>
  <td>
  <div th:text="${contrato.uso}"></div>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td>
  Recurso:
  </td>
  <td>
  <div th:text="${contrato.recurso}"></div>
  </td>
 </tr>
 <tr>
  <td>
  Fonte:
  </td>
  <td>
  <div th:text="${contrato.fonte}"></div>
  </td>
 </tr>
</table>
</div>

<p></p>

<div style="display: block; float:left; margin-left:250px; margin-top:20px;">
<table>
 <tr>
  <td>
  Vencimento:
  </td>
  <td>
  <div th:text="${#dates.format(contrato.data_vencimento, 'dd/MM/yyyy')}"></div>
  </td>
 </tr>
 <tr>
  <td>
  Duração meses:
  </td>
  <td>
  <div th:text="${contrato.duracao_meses}"></div>
  </td>
 </tr>
 <tr>
  <td>
  Meses para o vencimento:
  </td>
  <td>
  <div th:text="${contrato.meses_vencimento}"></div>
  </td>
 </tr>
 <tr>
  <td>
  Vencimento garantia:
  </td>
  <td>
  <div th:text="${contrato.vencimento_garantia} ? ${#dates.format(contrato.vencimento_garantia, 'dd/MM/yyyy')} : 'Não informado'"></div>
  </td>
 </tr>

</table>
</div>

<p></p>
<div style="display: block; float:left; margin-left:200px; margin-top:20px;">
<table>
 <tr>
  <td>
  Valor do contrato:
  </td>
  <td>
  <div th:text=" |R$ ${{contrato.valor_contrato}}|"></div>
  </td>
 </tr> 
 <tr>
  <td>
  Valor com aditivo:
  </td>
  <td>
  <div th:text=" 'R$' + ${#numbers.formatDecimal(totalcomaditivos, 0, 'POINT', 2, 'COMMA')}"></div>
  </td> 
 </tr>
 <tr>
  <td>
  Valor total:
  </td>
  <td>
  <div th:text= " 'R$' + ${#numbers.formatDecimal(total, 0, 'POINT', 2, 'COMMA')}"></div>
  </td>
 </tr>
 <tr>
  <td>
  Saldo contrato:
  </td>
  <td>
  <div th:if="${risco}" style="color:red" th:text="'R$' + ${#numbers.formatDecimal(saldo_contrato, 0, 'POINT', 2, 'COMMA')}"></div>
  <div  th:if="${risco} == false" th:text="'R$' + ${#numbers.formatDecimal(saldo_contrato, 0, 'POINT', 2, 'COMMA')}"></div>
  </td>
 </tr>
 
 <tr>
  <td>
  % concluída:
  </td>
  <td>
  <div th:text="${porcentagem_concluida}"></div>
  </td>
 </tr>
 
 <tr>
  <td>
  % a concluir:
  </td>
  <td>
  <div th:text="${porcentagem_a_concluir}"></div>
  </td>
 </tr>
 
 
 <tr>
  <td>
  Total aditivos:
  </td>
  <td>
  <div th:text="'R$' + ${#numbers.formatDecimal(total_aditivos, 0, 'POINT', 2, 'COMMA')} "></div>
  </td>
 </tr>
</table>
</div>

<p></p>
<p></p>
<p></p>
<!--  th:if="${noventadias}"-->
<!--  th:if="${vencido}" -->


<table class="table table-bordered table-striped">
<thead>
				<tr>
				<th class="text-center col-md-1">Data do Lançamento</th>
				<th class="text-center col-md-2">Competência</th>
				<th class="text-center col-md-1">Nota fiscal</th>
				<th class="text-center col-md-1">Medição</th>
				<th class="text-center col-md-1">Processo</th>
				<!--  <th class="text-center col-md-2">ID de Impressão</th> -->
				<th class="text-center col-md-1">Processo aberto em</th>
				<th class="text-center col-md-1">Liquidação da nota</th>
				<th class="text-center col-md-1">Processo pago em</th>
				
				<th class="text-center col-md-1">Valor</th>
				<th class="text-center col-md-1">Número aditivo</th>
				<th class="text-center col-md-1">Valor aditivo</th>		
				<th class="text-center col-md-1">Saldo</th>
						
				<th class="text-center col-md-1">Objeto ou Observação</th>
				
				
				</tr>
				
</thead>
<tbody>
				<tr th:each="lancamento : ${lancamentosOrdenados}">
					<td class="text-center" th:text="${lancamento.data} ? ${#dates.format(lancamento.data, 'dd/MM/yyyy')} : 'Não informado'"></td>
					<td class="text-center" th:text="${lancamento.competencia}"></td>
					<td class="text-center" th:text="${lancamento.numero_nota_fiscal}"></td>
					<td class="text-center" th:text="${lancamento.medicao}"></td>
					<td class="text-center" th:text="${lancamento.processo} ? ${lancamento.processo.numero_processo} : 'Processo inexistente'"></td>
					<td class="text-center" th:text="${lancamento.processo} and ${lancamento.processo.data_abertura} ? ${#dates.format(lancamento.processo.data_abertura, 'dd/MM/yyyy')}"></td>
					<td class="text-center"><div th:switch="${lancamento.liquidado}" ><span class="text-center" th:text="${lancamento.dataliquidacao} ? ${#dates.format(lancamento.dataliquidacao, 'dd/MM/yyyy')}" th:case="true" ></span><span class="label label-warning" th:text="'Nota não liquidada'" th:case="false" ></span></div> </td>
					<td class="text-center"><div th:switch="${lancamento.processo} ? ${lancamento.processo.pago}" ><span class="text-center" th:text="${#dates.format(lancamento.processo.data_pagamento, 'dd/MM/yyyy')}" th:case="true" ></span><span class="label label-warning" th:text="'Não pago'" th:case="null" ></span></div> </td>
					
					<td class="text-center" th:text=" 'R$' + ${#numbers.formatDecimal(lancamento.valor, 0, 'POINT', 2, 'COMMA')}"></td>
					<td class="text-center" th:text="${lancamento.aditivo_n} ? ${lancamento.aditivo_n} : 'Sem aditivo'"></td>
					<td class="text-center" th:text=" ${lancamento.valor_aditivo}  ? ${#numbers.formatDecimal(lancamento.valor_aditivo, 0, 'POINT', 2, 'COMMA')} : 'Não informado'"></td>
					<td class="text-center" th:text=" 'R$' + ${#numbers.formatDecimal(lancamento.saldo_contrato, 0, 'POINT', 2, 'COMMA')}"></td>
					<td class="text-center" th:text="${lancamento.observacao}"></td>
					<!--<td class="text-center" th:text="${lancamento.processo.pago}"></td> -->
				
				</tr>
				
			<tr>
				<td colspan="6" th:if="${#lists.isEmpty(contrato.lancamentos)}">Nenhum lançamento</td>
			</tr>
</tbody>
</table>
</section>
</div>

</body>

<script src="/layout/javascripts/vendors.min.js"></script>
<script src="/layout/javascripts/algaworks.min.js"></script>


<script src="/layout/javascripts/bootstrap-datepicker.min.js"></script>
 <script src="/layout/javascripts/bootstrap-datepicker.pt-BR.min.js"></script>
<script src="/layout/javascripts/bootstrap.min.js"></script>
<script src="/layout/javascripts/jquery-2.2.0.min.js"></script>

</html>